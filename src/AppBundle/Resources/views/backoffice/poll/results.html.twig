{% extends "::backoffice_base.html.twig" %}
{% trans_default_domain 'admin-poll' %}

{% block title %}{{ 'poll_results' | trans }}{% endblock %}

{% block bodyclass %}app header-fixed sidebar-fixed aside-menu-fixed aside-menu-hidden{% endblock %}

{% block main %}
    <h1 class="text-center">
        {{ 'poll_results' | trans }}
        <a href="{{ path('backoffice_poll_export', {'id': poll.id}) }}" class="btn btn-success">
            <i class="fa fa-file-excel-o" aria-hidden="true"></i>
        </a>
    </h1>
    <hr>

    <div class="row">
        <div class="col-12 mb-1">
            <h2 class="text-center">{{ poll.title }}</h2>
        </div>
    </div>
    {% for chart in charts %}
        <div class="row">
            <div class="col-12">
                <h3 class="text-center">{{ chart.question.qTitle }}</h3>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-5" style="padding-right: 20px">
                <table class="table table-bordered table-striped table-condensed">
                    <thead>
                    <tr>
                        <th></th>
                        <th>Proposition</th>
                        <th>Quantité</th>
                        <th>Pourcentage</th>
                    </tr>
                    </thead>
                    <tbody class="chart-legend-{{ chart.chart.id }}" data-type="{{ chart.question.qType }}">
                    </tbody>
                </table>
            </div>
            <div class="col-3">
                {{ chartjs_render_html(chart.chart) }}
            </div>
        </div>
        {% if chart.question.qType == 'LinearScale' %}
            <div class="row justify-content-center" style="font-style: italic;
    text-decoration: underline;">
                <span>
                    Moyenne des réponses au sondage : <strong class="average-linear-{{ chart.chart.id }}"></strong>
                </span>
            </div>
        {% endif %}
    {% endfor %}
    {% block javascripts %}
        <!-- ChartJSStart -->
        <script src="{{ asset('CoreUI/bower_components/jquery/dist/jquery.min.js') }}"></script>
        <script src="{{ asset('CoreUI/bower_components/chart.js/dist/Chart.min.js') }}"></script>
        <script>
          //            Chart.defaults.global.animation.duration = 0;
          {% for chart in charts %}
          {{ chartjs_render_js(chart.chart) }}
          {% endfor %}
        </script>
        <!-- ChartJSEnd -->
    {% endblock %}
{% endblock %}
